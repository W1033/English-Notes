# 英语词库编辑整理

## mdx、mdd 与 css 之间的关系

> 文章来源：https://xfdj.github.io/2020/12/18/mdx%E3%80%81mdd%E4%B8%8Ecss%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/

 发表于 2020-12-18 更新于 2022-05-20 本文字数： 1.2k 

> MDict 是一款用于 PC 及移动设备的电子辞典软件，可以用于查看 mdx 格式的词典文件。
>
> —— 维基百科

MDict 本身并不提供词库，不过可以从网上下载到热心网友为 MDict 制作的词库，包括各大著名词典比如牛津、剑桥、朗文等等。

我们从网上下载词库文件，一般会下载到后缀为`.mdx`、`.mdd` 和`.css` 后缀的文件。`.css` 是给`.mdx` 排版的文件。

`.mdx` 和`.mdd` 文件是 MDict 的词库文件，其中

- `.mdx` 文件是存文字的词库文件，实质上是由成千上万个由 HTML 语言编写的词条排列压缩构成的，它包含了一部词典几乎所有的文本。
- `.mdd` 是词库资源包，存除文字以外的全部内容，包括 CSS、JavaScript、音频、图片、视频等等，任何文件都可以打包到`.mdd` 里去，能不能和`.mdx` 联合起来查看另说，所以一般来说，`.mdd` 文件都会比`.mdx` 文件大很多，不过`.mdd` 文件是可选的。

- `.css` 是外部层叠样式表，控制`.mdx` 中 HTML 文本的排版，有了它，可以让词典焕发出绚丽的色彩。CSS 可以打包进`.mdd`，也可以外置成单独的一个文件。如果`.mdx` 要链接上 CSS，内容里必须有 `<link href="content://xxx.css">` 这样的代码。但是对 MDict 而言，有一种特殊情况：比如 `A.mdx` 的没有 `<link href="content://xxx.css">`，可以建一个同名文件 `A.css` 来控制 `A.mdx` 的排版（在 GoldenDict 下似乎暂时不可行）。另外，如果 `A.mdx` 有 `<link href="content://B.css">`，那么这个 `B.css` 可以打包进 `A.mdd`，也可以外置和 `A.mdx`、`A.mdd` 放在一起，但是不能改名（如果改名成 `A.css`，在 MDict 下还是可以的，其他软件不保证效果）。

从网上下载的`.mdx`、`.mdd` 文件，可以随意改名，只要文件名一致就行，但是`.css` 不能随便更改，必须是制作者提供的那个名字，除非自己修改，链接了另一个名字的`.css`。有部分制作者，`.mdd` 里打包了 CSS，不过为了方便其他人修改，又提供了一个外置的 CSS，所以这种情况下，删除了外置的 CSS，排版效果仍在。而根据参考网页的说法，外置的 CSS 优先级是高于内置的 CSS 的，也就是说如果你修改了外置的 CSS，那相应的`.mdx` 文件的排版是会改变的。

如果要更换 CSS，首先需要**备份原 CSS 文件**。然后将新的 CSS 文件直接覆盖原 CSS 文件即可（文件名要保持相同）。而且，一部词典的 CSS 是为该词典量身定做的，使用其它词典的 CSS 可能会导致各方面的问题，所以不要拿其它词典的 CSS 套用在自己想要的词典上。










## 英语词库编辑 CSS 样式方法

> 文章来源：https://www.pdawiki.com/forum/thread-25453-1-1.html ([教程] 最最最最详细的手把手地教你修改css)

### 准备材料：
1. MdictWindows版：用于获取某个词条的源代码。 文件见：`./英语词库编辑所需文件/MDictPC.7z`
2. MdxExport，用于解压出 MDD 文件中的 css 文件。 文件见：`./英语词库编辑所需文件/MdxExport.3.6.zip`
3. Chrome 浏览器，用于调试 css 代码。


### 第一步：获取某个词条的源代码
详细过程：
- 最好先在桌面上建立一个文件夹，比如我这次要修改 "牛津词典"，我就会创建一个叫 "牛津" 的文件夹，用于存放相关文件。
- 建立好文件夹后，把 mdx 和对应的 css 文件放进去。注：有些词典的 css 文件并不是直接给你的，而是被压缩在对应的 mdd 文件里面的，因此，对于这些词典，首先要做的就是使用 MDX EXPORT 获取它的 css 文件。该软件的操作完全是傻瓜式的，这里就不赘述了。
- 解压出来的文件夹中如果有css，就把它拉到 "牛津" 文件夹里，要是没有css的话，那就说明这部词典使用了内嵌式css样式，无法用此方式修改。
- 打开mdict，点击 "词库"，加载牛津词典。查询几个单词。这几个单词的解释要比较长，因为越长说明它涵盖的样式越多，越方便修改。这里推荐几个：take，think，make，go等。查完某个单词，鼠标移到解释界面并右击，点击 "查看源"，这时会显示一个txt文档。


### 第二步：处理txt文档。
- 在源代码txt文件中，点击编辑——查找，输入 `.css` （不包含冒号），开始查找。你会搜到几处高亮显示的 `content://mdict.cn/mdd/109/oalecd8e.css`，把 `oalecd8e.css` 前面的部分删除。
- 如果你要修改的词典文件还使用了 js，那么还要搜索 `.js` ，在牛津里，我搜到两处：`content://mdict.cn/mdd/109/jquery.js和content://mdict.cn/mdd/109/oalecd8e.js`，还是像处理 css 那样，把`content://mdict.cn/mdd/109/` 部分删掉，就剩下 jquery.js 和 oalecd8e.js。
- 处理完毕后，点击保存，文件名为think，文件格式为 `html` （可以通过重命名改后缀的方式完成），词条源码文件依旧储存在 `牛津` 文件夹内。（注意，mdx，html，css三个文件一定要放在同一目录下）



### 第三步：修改css。
- 打开Chrome浏览器，将第二步中得到的html文件“think.html”拖动到浏览器界面中，你就能看到这个单词在词典中的样子了（如果你第二步中的操作有误，你就不看到任何排版，只有杂乱的文字）。8 _# T& u' R& e
- 接着，按“win+F12”，打开调试窗口（有的电脑直接按F12，有的按Fn+F12）。调试窗口我们能用到的只有Elements和Sources窗口。在Elements窗口下，点击最左上角的按钮后，再去点击浏览器中所显示的词条的某个部分，在styles下会出现各种与你所点击内容样式相关的代码（这个操作贯穿修改css全程的始终）。
- 如图，点击词头“think”后在styles下方出现了与词头样式相关的代码，每一个代码之前有一个框。在框中有√就说明该样式已被激活，你可以用鼠标点击这个√，这样√会消失，这个样式会取消激活。（你可以灵活地使用这个方法去试探某个样式到底是不是你想控制内容的样式）。各种css中常见的代码有：color（改颜色），font-size（改字体大小），font-family（改字体），font-weight（更改字体粗细），border（添加边框），border-radius（调整边框四角弧度）等，百度中有很多相关内容。修改的部分你多试几次就熟练了，这里不再赘述了。修改过程中，请放心大胆修改，ctrl+z可以撤销操作。



## 欧陆词典中的朗文词库编辑 CSS

欧路词典中的 LDOC 6 V3.0 的 CSS 文件自己编辑没有用，2022.07.12 下午 1 - 3 点折腾了 2 个小时，==放弃==。

要编辑的文件为 `ldoce6ec.css` 这个文件，但是不知道为什么几个文件夹替换就是可以的，但我自己打开 css 编辑就不行，醉了。
